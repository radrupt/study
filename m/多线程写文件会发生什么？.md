1. 在O_APPEND模式下，如果操作系统符合posix，且写入的数据不超过PIPE_BUF（管道缓存）那么是原子的，否则就不是原子的
2. 在非O_APPEND模式下不保证原子性

O_APPEND如何实现原子的呢？
1. 修改文件是基于偏移量，O_APPEND模式下，如果有多个线程写文件，会在一个线程写完文件后更新连一个线程的偏移量来实现原子写
